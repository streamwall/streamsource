<div id="<%= dom_id(note) %>" class="group bg-gray-50 rounded-lg p-4 mb-4 hover:bg-gray-100 transition-colors">
  <div class="flex items-start justify-between">
    <div class="flex-1">
      <div class="flex items-center space-x-3 mb-2">
        <!-- User Avatar -->
        <div class="flex-shrink-0">
          <div class="w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-xs font-medium text-white">
            <%= note.user.email.first.upcase %>
          </div>
        </div>
        
        <!-- User and Time -->
        <div class="flex items-center space-x-2 text-sm">
          <span class="font-medium text-gray-900"><%= note.user.email %></span>
          <span class="text-gray-400">â€¢</span>
          <time class="text-gray-500" title="<%= note.created_at.strftime('%B %d, %Y at %I:%M %p') %>">
            <%= time_ago_in_words(note.created_at) %> ago
          </time>
          <% if note.created_at != note.updated_at %>
            <span class="text-xs text-gray-400 italic">(edited)</span>
          <% end %>
        </div>
      </div>
      
      <!-- Note Content -->
      <div class="text-sm text-gray-700 whitespace-pre-wrap leading-relaxed ml-9">
        <%= note.content %>
      </div>
    </div>
    
    <!-- Actions -->
    <div class="flex items-center space-x-1 ml-4 opacity-0 group-hover:opacity-100 transition-opacity">
      <% if note.owned_by?(current_admin_user) %>
        <% if note.notable_type == 'Stream' %>
          <%= link_to admin_stream_edit_note_path(note.notable, note), 
              class: "p-1 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded",
              title: "Edit note",
              data: { turbo_frame: "modal" } do %>
            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
          <% end %>
          <%= button_to admin_stream_note_path(note.notable, note),
              method: :delete,
              class: "p-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded",
              title: "Delete note",
              data: { turbo_confirm: "Are you sure you want to delete this note?" } do %>
            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          <% end %>
        <% else %>
          <%= link_to admin_streamer_edit_note_path(note.notable, note), 
              class: "p-1 text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 rounded",
              title: "Edit note",
              data: { turbo_frame: "modal" } do %>
            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
            </svg>
          <% end %>
          <%= button_to admin_streamer_note_path(note.notable, note),
              method: :delete,
              class: "p-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded",
              title: "Delete note",
              data: { turbo_confirm: "Are you sure you want to delete this note?" } do %>
            <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
          <% end %>
        <% end %>
      <% else %>
        <span class="text-xs text-gray-400 italic">View only</span>
      <% end %>
    </div>
  </div>
</div>