---
all:
  vars:
    app_name: streamsource
    app_user: rails
    app_path: /home/rails/streamsource
    ruby_version: 3.3.6
    nodejs_version: 20
    
    # These will be populated by Terraform
    database_url: "{{ lookup('env', 'DATABASE_URL') }}"
    redis_url: "{{ lookup('env', 'REDIS_URL') }}"
    secret_key_base: "{{ lookup('env', 'SECRET_KEY_BASE') }}"
    rails_master_key: "{{ lookup('env', 'RAILS_MASTER_KEY') }}"
    jwt_secret: "{{ lookup('env', 'JWT_SECRET') }}"
    
  children:
    app_servers:
      hosts:
        app-1:
          ansible_host: "{{ lookup('env', 'APP_SERVER_IP') }}"
          ansible_ssh_private_key_file: ~/.ssh/digitalocean_rsa